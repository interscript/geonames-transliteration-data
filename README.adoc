= GeoNames data for transliteration testing

image:https://github.com/riboseinc/geonames-transliteration-data/workflows/build/badge.svg["Build Status", link="https://github.com/riboseinc/geonames-transliteration-data/actions?workflow=build"]

== Purpose

Extract transliteration pairs (entries that are coded with transliteration systems) for testing of those transliteration sstems.

== Usage

=== Basic

[source,bash]
----
make all
----

Achieves all the steps below.


=== Create the GeoNames database for filtering

Create a SQLite3 database using the "`all countries`" GeoNames data set.

[source,bash]
----
make geonames.db
----

Internally it will run this:

[source,bash]
----
$ curl -sL http://geonames.nga.mil/gns/html/cntyfile/geonames_20200106.zip -o geonames.zip
$ unzip geonames.zip -d data
$ sqlite
sqlite> .mode tabs
sqlite> .import geonames_20200106/Countries.txt countries
sqlite> .backup geonames.db
sqlite> exit
----

=== Extract all transliteration pairs first

[source,bash]
----
make geonames_pairs.db
----

You will get `geonames_pairs.csv` which contains all transliteration pairs.

[source,csv]
----
TRANSL_CD|SRC_UNI|SRC_NT|SRC_FULL_NAME_RO|SRC_FULL_NAME_RG|DEST_UNI|DEST_NT|DEST_FULL_NAME_RO|DEST_FULL_NAME_RG|LC
zho_Hani2Latn_WDG_1979|475320|D|Qiantangjiang Zhan|Qiantangjiang Zhan|12277331|DS|钱塘江站|钱塘江站|zho
zho_Hani2Latn_WDG_1979|14673196|V|Tung-men Chiao|Tung-men Chiao|14633249|VS|东门礁|东门礁|zho
zho_Hani2Latn_WDG_1979|14673197|V|Hsi-men Chiao|Hsi-men Chiao|14633249|VS|东门礁|东门礁|zho
...
----


=== Extracting for every transliteration system

[source,bash]
----
make all
----

Your output files will be stored in `pairs/${translit_system}.csv` and look like this:

[source,csv]
----
TRANSL_CD,SRC_UNI,SRC_NT,SRC_FULL_NAME_RO,SRC_FULL_NAME_RG,DEST_UNI,DEST_NT,DEST_FULL_NAME_RO,DEST_FULL_NAME_RG,LC
ara_Arab2Latn_BUC_2002,17550392,N,"Wādī al Khuḑrah","Wādī al Khuḑrah",17550393,NS,"وادي الخضرة","وادي الخضرة",ara
ara_Arab2Latn_BUC_2002,-3489887,D,"Wādī ad Dafīn","Wādī ad Dafīn",14461283,DS,"وادي الدفين","وادي الدفين",ara
ara_Arab2Latn_BUC_2002,18101655,N,"Shi‘b Ḩāzirin","Ḩāzirin, Shi‘b",18101656,NS,"شعب حازرن","شعب حازرن",ara
ara_Arab2Latn_BUC_2002,14363956,N,"Būghāz Raqm Ithnān","Raqm Ithnān, Būghāz",14305791,NS,"بوغاز رقم ٢","بوغاز رقم ٢",ara
...
----


== Credits

Copyright Ribose.
